<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hủy lịch hẹn</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h2>Hủy lịch hẹn</h2>
    <p id="message">Đang xử lý...</p>

    <script>
    $(document).ready(function() {
        // Lấy query parameters từ URL
        const urlParams = new URLSearchParams(window.location.search);
        const name = urlParams.get('name');
        const dtStart = urlParams.get('dtStart');
        const dtEnd = urlParams.get('dtEnd');

        // Gửi dữ liệu đến webhook mới
        $.ajax({
            url: "http://192.168.1.165:8080/cld/webhook-test/appointment-status", // Thay bằng URL webhook mới của n8n cho hành động hủy
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({
                action: 0,
                 id: appointmentId
            }),
            success: function(response) {
                $("#message").text("Hủy lịch hẹn thành công!");
                console.log("Webhook response:", response);
            },
            error: function(xhr, status, error) {
                $("#message").text("Có lỗi xảy ra, vui lòng thử lại!");
                console.log("Error:", xhr, status, error);
            }
        });
    });
    </script>
</body>
</html>